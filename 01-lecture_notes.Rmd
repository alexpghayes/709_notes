# Lecture Notes {#lectures}

## Chapter 1: Probability Theory

### Lecture 1: Measure space, measurable function, and integration

#### $\sigma$-fields

```{definition, label = "sigmaField", name = "$\\sigma$-field (or $\\sigma$-algebra)"}
A $\F$ collection of subsets of $\Omega$ is called a $\sigma$-field (or $\sigma$-algebra) if the following three conditions hold:

i) $\emptyset \in \F$
ii) $A \in \F \Rightarrow A^{c} \in \F$
iii) If $A_i \in \F$ for all $i = 1,2,\ldots$, then $\bigcup_i A_i \in \F$.

```


```{example, name = "A Few $\\sigma$-fields"}
There are some trivial examples. One is the example where $\F = \{\emptyset,\Omega\}$. It is easy to check that the three conditions are met for this collection of subsets. Another trivial example would be $\F = \P(\Omega)$\footnote{P is used to denote the collection of all subsets.}. 

The simplest non-trivial example is $\F = \left\{\emptyset, A, A^C, \Omega\right\}$ where $A \subset \Omega$. Since this collection of subsets is so small, it is easy to check the three conditions mentioned above. 

```


```{definition, name = "Measurable Space", label = 'measurableSpace'}
If $\F$ is a $\sigma$-field on $\Omega$, then we call $\left(\Omega, \F\right)$ a ***measurable space***. 
```

#### $\sigma$-field generated by a collection of subsets

Sometimes we are interested in a specific collection of subsets, $\C$, that is NOT a $\sigma$-field. But since all the machinery we will develop works with $\sigma$-fields, we are interested in creating a $\sigma$-field that contains $\C$. So we introduce the notion of a *$\sigma$-field generated by a collection of subsets*. 

```{definition, name = "Generated $\\sigma$-field"}
The smallest $\sigma$-field containing a collection of subsets, $\C$, is called the $\sigma$-field generated by $\C$. 
```

$\sigma\left(\C\right)$ is used to denote the $\sigma$-field generated by $\C$, and is by definition the smallest $\sigma$-field that contains $\C$: if $\F$ is a $\sigma$-field with $\C \subset \F$, then $\sigma\left(\C\right) \subseteq \F$. 

#### Borel $\sigma$-field

A particular important $\sigma$-field is the Borel $\sigma$-field. In general, this is defined as the $\sigma$-field generated by the collection of all open subsets of a specific topology. In particular, if we consider $\R^k$ is the $k$-dimensional Euclidean space, $\mc{O} = \left\{O \subseteq \R^k \left | O\ \text{open set} \right\}\right.$, then $\sigma\left(\mc{O}\right) = \B^k$ (the Borel $\sigma$-field on $\R^k$).

It can be shown that the $\sigma$-field generated by the collection of all closed sets is also the Borel $\sigma$-field.

Sometimes it is useful to be able to limit ourselves to a subspace of $\R^k$. In such cases, we can create the Borel $\sigma$-field on that subspace in the following way: if $C \in \B^k$, then $\B_C = \left\{ C\cap B \left | B \in \B^k \right\}\right.$ is the Borel $\sigma$-field on $C$. 

#### Measures

```{definition, name = "Measure", label = 'measure'}
Let $\left( \Omega, \F \right)$ is a measurable space

$\nu: \F \rightarrow \R \cup\{\infty\}$ is said to be a ***measure*** if

i) $0 \leq \nu(A) \leq \infty$ for all $A \in \F$
ii) $\nu(\emptyset) = 0$
iii) If $A_i \in \F$ for $i=1,2,...$, and $A_i \cap A_j = \emptyset, \forall i \neq j$ (i.e. $A_i$'s are pairwise disjoint), then it must hold that 
$$\nu\left(\bigcup_{i=1}^\infty A_i \right) = \sum_{i=1}^\infty \nu(A_i)$$

```

```{example, name = "Counting Measure"}
The *counting measure* is simply the measure that returns the number of elements in a set. 
```

```{example, name = "Lebesgue Measure"}
The measure $m: \R \rightarrow \R$ satisfying that for all intervals $[a,b], a < b$, 

$$m([a,b]) = b-a,$$

is called the *lebesgue measure*. This measure is unique. 

```

```{definition, name = "$\\sigma$-finite measures", label = "sigma-finite"}
A measure $\nu$ is called *$\sigma$-finite* if and only if there exists a sequence $\left\{A_1,A_2,\ldots\right\}$ such that $\cup A_i = \Omega$ and $\nu(A_i) < \infty, \forall i$. 
```

```{definition, name = "Measure Space"}
If $\nu$ is a measure on $\F$, and $(\Omega, \F)$ is a measurable space, then $(\Omega, \F, \nu)$ is a ***measure space***. 
```

```{example}
Both the Lebesque measure is $\sigma$-finite.

The counting measure is $\sigma$-finite if and only if $\Omega$ is countable.
```

```{definition, name = "Probability Space"}
If $(\Omega, \F, \nu)$ is a measurable space with $\nu(\Omega) = 1$, then it is called a ***probability space***. 
```

```{proposition, name = "Properties of measures", label = 'properties-of-measures'}
Let $(\Omega, \F, \nu)$ be a measure space. Then the following holds:

i) **Monotonicity:** if $A \subseteq B$, then $\nu(A) \leq \nu(B)$
ii) **Subadditivity:** for any sequence, $A_1,A_2,\ldots$,

$$
\nu\left(\bigcup_{i=1}^\infty A_i\right) \leq \sum_{i=1}^\infty \nu(A_i)
$$

iii) **Continuity:** if $A_1 \subset A_2 \subset \dots$ (or $A_1 \supset A_2 \supset \dots$), then 

$$
\nu\left(\lim_{n\rightarrow \infty}A_n\right) = \lim_{n\rightarrow\infty}\nu\left(A_n\right),
$$
where

$$
\lim_{n\rightarrow\infty}A_n = \bigcup_{i=1}^\infty A_i \left(\text{or} = \bigcap_{i=1}^\infty A_i\right)
$$

```

```{definition, name = "Cumulative Distribution Function", label = 'cdf'}
The *cumulative distribution function* (c.d.f.) of a measure $\nu$ is defined as $$F(x) = \nu((-\infty,x]), x\in\R.$$

```

There is a one-to-one correpsondence between probability measures on $(\R, \B)$ and the set of c.d.f.'s. 

```{proposition, name = "Properties of c.d.f.'s", label = 'cdfProperties'}

i) For a c.d.f, $\F$, on $\R$, it holds that:
    a) $F(-\infty) = 0$
    b) $F(\infty) = 1$
    c) $x \leq y \Rightarrow F(x) \leq F(y)$ (*non-decreasing*)
    d) $\lim_{y\rightarrow x^+} F(y) = F(x)$ (*right continuous*)
ii) If a function $F: \R \rightarrow \R$ satisfies the four conditions above, it is a c.d.f. of a unique probability measure on $(\R, \B)$. 
```

```{proposition, name = "The Product Measure Theorem", label = 'productMeasure'}
If $\left(\Omega_i, \F_i, \nu_i\right), i = 1,\ldots,k$ are measure spaces with $\sigma$-finite measures. Then there exists a unique measure on the $\sigma$-field $\sigma(\F_1 \times \dots \F_k)$:

$$
\nu_1 \times \dots \times \nu_k(A_1 \times \dots \times A_k) = \nu_1(A_1)\dots \nu_k(A_k)
$$
  
for all $A_i \in \F_i, i = 1,\ldots,k$. 

This measure is called the *product measure*. 
```


```{definition, name = "Joint and Marginal c.d.f.'s", label = 'joint-marginal'}
The *join c.d.f.* of a probability measure on $(\R^k, \B^k)$ is defined as 

$$
F(x_1,\ldots, x_k) = P((-\infty, x_1]\times \dots \times (-\infty,x_k]), \quad x_i \in \R.
$$

```

## Lecture 2: 9/11


```{definition, name = "Measurable Function", label = 'measurable-function'}

Let $(\Omega, \F)$ and $(\Lambda, \mathcal{G})$ be measurable spaces. Let $f: \Omega \rightarrow \Lambda$. 

$f$ is called a *measurable function* if and only if 

$$
  f^{-1}(\mathcal{G}) \subset \F (\text{i.e.} f^{-1}(G) \in \F \forall G \in \mathcal{G}).
$$

```

Note that if $\F$ is the collection of all subsets of $\Omega$, then all functions are measurable. 

```{definition, name = "$\\sigma$-field generated by a function"}

Let $f$ be as in \@ref{measurable-function}. Then $f^{-1}(\mathcal{G})$ is a sub-$\sigma$-field of $\F$. We call it the $\sigma$-field generated by $f$, and denote it by $\sigma(f)$. 

```

```{definition, name = "Borel Functions", label = 'borelfunctions'}

A function from $(\Omega, \F)$ to $(\R, \B)$ is called a *Borel function$ if it is measurable.

```

```{proposition, name = "Properties of Borel Functions"}

i) A function is Borel if and only if $f^{-1}(a,\infty) \in \F$ for all $a \in \R$.

ii) If $f$ and $g$ are Borel, then so are $fg$ and $af + bg$, where $a,b \in \R$. Also, if $g(\omega) \neq 0$ for all $\omega \in \Omega$, then $f/g$ is also Borel. 

iii) If $f_1, f_2, \ldots$ are all Borel functions, then so are $\sup_n f_n$, $\inf_n f_n$, $\lim \sup_n f_n$, and $\lim \inf_n f_n$. Furthermore, the set 
$$ 
  A = \left\{ \omega \in \Omega | \lim_{n \rightarrow \infty} f_n(\omega) \text{ exists} \right \}
$$
is an event, and the function
$$
  h(\omega) = \left\{ 
    \begin{array}{ll}
      \lim_{n\rightarrow \infty} f_n \omega & \quad \omega \in A \\
      f_1(\omega) & \quad \omega \notin A 
    \end{array}
  \right .
$$

      
iv) Suppose that $f$ is measurable from $(\Omega, \F)$ to $(\Lambda, \mathcal{G})$ and $g$ is measurable from $(\Lambda, \mathcal{G})$ to $(\Delta, \mathcal{H})$. Then the composite function $g \circ f$ is measurable from $(\Omega, \F)$ to $(\Delta, \mathcal{H})$. 

v) Let $\Omega$ be a Borel set in $\R^p$. If $f$ is a continuous function from $\Omega$ to $\R^q$, then $f$ is measurable. 

```

```{proposition}
For any non-negative Borel function $f$ there exists a sequence of non-negative simple functions $f_1, f_2, \ldots$ such that 

$$f_n \rightarrow f \text{ for } n \rightarrow \infty$$
  
```

```{definition, name = "Distribution", label = 'distribution'}
Let $(\Omega, \F, \nu)$ be a measure space, and $f$ a measurable function from this measure space into the measurable space $(\Lambda, \mathcal{G})$.  

The measure defined as 

$$
  \nu \circ f^{-1}(B) = \nu(f\in B) = \nu(f^{-1}(B)), \quad B \in \mathcal{G} 
$$
  
is called the *induced measure* by $f$. 

If $\nu$ is a probability measure and $f$ is a random variable (i.e. a Borel function), then $\nu\circ f^{-1}$ is called the *distribution* (or *law*) of $f$, and is denoted $\nu_f$. 
```

Notice that there are many notations for the same thing. If $P$ is a probability measure and $X$ a random variable, then

$$P_X(B) = P(X \in B) = P(X^{-1}(B)) = P \circ X^{-1}.$$

### Integration

```{definition, name = 'Simple Function', label = 'simple-function'}
A function $\phi$ is called a *simple function* if it is of the form 

$$
  \phi = \sum_{i=1}^\infty a_i 1_{A_i},
$$
  
where $A_1, A_2, \ldots$ are sets. If $a_i \geq 0$ for all $i \ge 1$, then $\phi$ is a non-negative simple function. 

```


```{definition, name = "Integral of a Non-negative Simple Function", label = 'int-simple'}
The integral of a non-negative simple function $\phi$ with respect to a measure $\nu$ is defined as 

$$
  \int \phi d\nu = \sum_{i=1}^k a_i \nu(A_i).
$$
  
```


```{definition, name = "Integral of Non-negative Borel Function", label = 'int-nonneg'}
Let $f$ be a non-negative Borel function. Let $\mathcal{S}_f$ be the collection of ALL non-negative simple function with $\phi(\omega) \le f(\omega), \forall \omega \in \Omega$. 

The integral of $f$ with respect to $\nu$ is defined as 

$$
  \int f d\nu = \sup\left\{\int \phi d\nu \left | \phi \in \mathcal{S}_f \right\} \right . .  
$$

```

Note: one consequence of this is that for any non-negative Borel function, there exists a sequence of simple functions $\phi_1, \phi_2, \ldots$ such that $0 \leq \phi_i \leq f$ for all i and 

$$
  \lim_{n \rightarrow \infty} \int \phi_n d\nu = \int f d\nu
$$

```{definition, name = "Integral of General Borel Function", label = "int-borel"}

Let $f$ be a Borel function, and let $f_+(\omega) = \max\{f(\omega), 0\}$ (i.e. the positive part) and $f_-(\omega) = \max\{-f(\omega), 0\}$ (i.e. the negative part). If at least one of $\int f_+ d\nu$ and $\int f_- d\nu$ is finite, we say that $\int f d\nu$ exists and 

$$
  \int f d\nu = \int f_+ d\nu - \int f_- d\nu.
$$

```

```{definition, name = "Integrable Functions", label = "int-function"}

When $\int f d\nu < \infty$, i.e. the integral of both the positive and negative part of $f$ is finite, we say that $f$ is *integrable*. 

```

Note: as a consequence of the definition of an integrable function we have that a Borel function is integrable if and only if $|f|$ is integrable. (This is true since $|f| = f_+ + f_-$.)

Notation: There are many different ways to write down an integral:

$$ 
  \int f d\nu = \int_\Omega f d\nu = \int f(\omega) d\nu = \int f(\omega) d\nu(\omega) = \int f(\omega) \nu(d\omega),
$$

and if $F$ is the c.d.f. (\@ref(def:cdf)) of a probability measure P on $(\R^k, \B^k)$, 

$$
  \int f(x) dP = \int f(x) dF(x) = \int fdF
$$

```{proposition, name = "Linearity of Integrals", label = "int-linearity"}

Let $(\Omega, \F, \nu)$ be a measure space, and $f$ and $g$ be Borel functions.

i) If $\int fd\nu$ exists, then for any $a \in \R$, $\int (af)d\nu$ exists, and 

$$ \int (af)d\nu = a \int f d\nu $$

ii) If $\int f d\nu$ and $\int g d\nu$ both are well defined, then $\int (f+g) d\nu$ exists and

$$ \int (f+g) d\nu = \int f d\nu + \int g d\nu $$
  
```

```{proof}

Show that it holds for indicator functions, simple functions, non-negative functions, and then all functions. 

```

```{definition, name = "Almost Everywhere or Almost Surely"}

A statement is said to be true $\nu$-a.e. (or $\nu$-a.s.) if it is true for all $\omega \notin N$ and $\nu(N) = 0$. 

```

```{proposition, name = "a.e. for integrals"}
Let $(\Omega, \F, \nu)$ be a measure space, and $f$ and $g$ be Borel functions. 

i) If $f\leq g$ $\nu$-a.e., then $\int f d\nu \le \int g d\nu$, given that both integrals exist
ii) If $f \ge 0$ $\nu$-a.e. and $\int f d\nu = 0$, then $f = 0$ $\nu$-a.e.

```

```{proof}

ii) Let $A = \{f>0\}$ and $A_n = \{f \ge n^{-1}\}$, $n=1,2,\ldots$. Then $A_n \subset A$ for any $n$ and $\lim_{n \rightarrow \infty} A_n = \cup A_n = A$ (**show that this holds**). 

Then, by (iii) of \@ref(prp:properties-of-measures), $\lim_{n \rightarrow \infty} \nu(A_n) = \nu(A)$. By part (i) and proposition \@ref(prp:int-linearity), we get that, for any n,

\begin{align*}
  n^{-1} \nu(A_n) = \int n^{-1} I_{A_n} d\nu \le \int f I_{A_n} d\nu \le \int f d\nu = 0.
\end{align*}

```

### Radon-Nikodym Derivatives

## Lecture 3: 9/13

Proof of Ex 1.11: for any borel set A: if A = (-infty, x), it holds. If not, then... 

**$\pi$- and $\lambda$-systems.**

**Definition: $\pi$-system**

If $\C$ is a collection of subsets, and it holds that $A,B \in \C \Rightarrow A \cap B \in \C$.


For a pi system, $\sigma(\C) = \B$

```{proposition, name = "Calculus with Radon-Nikodym Derivatives", label = "calc-radon-nikodym"}
Let $\nu$ be a $\sigma$-finite measure on a measure space $(\Omega, \F)$. All other measures discussed in the following are defined on $(\Omega, \F)$. 

i) If $\lambda$ is a meaure, $\lambda << \nu$, and $f\ge 0$, then $$\int f d\lambda = \int f \frac{d\lambda}{d\nu}d\nu.$$
ii) If $\lambda_i$, $i=1,2$, are measures and $\lambda_i << \nu$, then $\lambda_1 + \lambda_2 << \nu$ and $$\frac{d(\lambda_1 + \lambda_2)}{d\nu} = \frac{d\lambda_1}{d\nu} + \frac{d\lambda_2}{d\nu}\quad \nu\text{-a.e.}$$
iii) If $\tau$ is a measure, $\lambda$ a $\sigma$-finite measure, and $\tau << \lambda << \nu$, then $$\frac{d\tau}{d\nu} = \frac{d\tau}{d\lambda}\frac{d\lambda}{d\nu}\quad \nu\text{-a.e.}.$$
iv) Let $(\Omega_i, \F_i, \nu_i)$ be a measure space and $\nu_i$ be $\sigma$-finite, $i=1,2$. Let $\lambda_i$ be a $\sigma$-finite measure on $(\Omega_i, \F_i)$ and $\lambda << \nu_i$, $i=1,2$. Then $\lambda_1 \times \lambda_2 << \nu_1 \times \nu_2$ and $$\frac{d(\lambda_1 \times \lambda_2)}{d(\nu_1 \times \nu_2)}(\omega_1,\omega_2) = \frac{d\lambda_1}{d\nu_1}(\omega_1)\frac{d\lambda_2}{d\nu_2}(\omega_2)\quad \nu_1\times \nu_2\text{-a.e.}$$. 

```
